package moji.com.mjweatherservicebase.card;

@kotlin.Metadata(d1 = {"\u0000¢\u0001\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0000\n\u0002\u0010\u0002\n\u0002\b\n\n\u0002\u0018\u0002\n\u0000\n\u0002\u0010\u0006\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\u0002\n\u0002\u0018\u0002\n\u0002\b\u0005\n\u0002\u0018\u0002\n\u0002\b\u0002\n\u0002\u0010 \n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\u0007\n\u0002\u0018\u0002\n\u0002\b\u0005\n\u0002\u0018\u0002\n\u0002\b\t\n\u0002\u0010\u000b\n\u0002\b\u0007\n\u0002\u0018\u0002\n\u0002\b\u0005\n\u0002\u0018\u0002\n\u0002\b\u0007\u0018\u0000 b2\u00020\u00012\u00020\u00022\u00020\u0003:\u0001bB\u0007¢\u0006\u0004\b`\u0010aJ&\u0010\u000b\u001a\u0004\u0018\u00010\n2\u0006\u0010\u0005\u001a\u00020\u00042\b\u0010\u0007\u001a\u0004\u0018\u00010\u00062\b\u0010\t\u001a\u0004\u0018\u00010\bH\u0016J\b\u0010\r\u001a\u00020\fH\u0016J\b\u0010\u000e\u001a\u00020\fH\u0016J\b\u0010\u000f\u001a\u00020\fH\u0016J\b\u0010\u0010\u001a\u00020\fH\u0016J\u0010\u0010\u0012\u001a\u00020\f2\u0006\u0010\u0011\u001a\u00020\bH\u0016J\u0012\u0010\u0013\u001a\u00020\f2\b\u0010\t\u001a\u0004\u0018\u00010\bH\u0016J\b\u0010\u0014\u001a\u00020\fH\u0016J\u0010\u0010\u0016\u001a\u00020\f2\u0006\u0010\u0015\u001a\u00020\nH\u0016J \u0010\u001c\u001a\u00020\f2\b\u0010\u0018\u001a\u0004\u0018\u00010\u00172\u0006\u0010\u001a\u001a\u00020\u00192\u0006\u0010\u001b\u001a\u00020\u0019J\u000e\u0010\u001f\u001a\u00020\f2\u0006\u0010\u001e\u001a\u00020\u001dJ\u000e\u0010\"\u001a\u00020\f2\u0006\u0010!\u001a\u00020 J\u0012\u0010#\u001a\u00020\f2\b\u0010\t\u001a\u0004\u0018\u00010\bH\u0002J\b\u0010$\u001a\u00020\fH\u0002J\b\u0010%\u001a\u00020\fH\u0002J\u0010\u0010(\u001a\u00020\f2\u0006\u0010'\u001a\u00020&H\u0002J\u0016\u0010,\u001a\u00020\f2\f\u0010+\u001a\b\u0012\u0004\u0012\u00020*0)H\u0002J\b\u0010-\u001a\u00020\fH\u0002R\u0018\u00101\u001a\u0004\u0018\u00010.8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\b/\u00100R\u0018\u00105\u001a\u0004\u0018\u0001028\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\b3\u00104R\u0018\u00108\u001a\u0004\u0018\u0001068\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\b\u0015\u00107R\u0018\u0010;\u001a\u0004\u0018\u00010\n8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\b9\u0010:R\u0018\u0010=\u001a\u0004\u0018\u0001068\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\b<\u00107R\u0018\u0010A\u001a\u0004\u0018\u00010>8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\b?\u0010@R\u0018\u0010C\u001a\u0004\u0018\u00010>8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\bB\u0010@R\u0018\u0010G\u001a\u0004\u0018\u00010D8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\bE\u0010FR\u0016\u0010J\u001a\u00020&8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\bH\u0010IR\u0018\u0010M\u001a\u0004\u0018\u00010\u00178\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\bK\u0010LR\u0016\u0010Q\u001a\u00020N8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\bO\u0010PR\u0016\u0010S\u001a\u00020N8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\bR\u0010PR\u0016\u0010U\u001a\u00020N8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\bT\u0010PR\u0018\u0010Y\u001a\u0004\u0018\u00010V8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\bW\u0010XR\u0018\u0010[\u001a\u0004\u0018\u00010V8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\bZ\u0010XR\u001c\u0010_\u001a\b\u0012\u0004\u0012\u00020V0\\8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\b]\u0010^¨\u0006c"}, d2 = {"Lmoji/com/mjweatherservicebase/card/RFlowersMapFragment;", "Lcom/moji/base/MJFragment;", "Landroid/view/View$OnClickListener;", "Lcom/amap/api/maps/AMap$OnMapLoadedListener;", "Landroid/view/LayoutInflater;", "inflater", "Landroid/view/ViewGroup;", "container", "Landroid/os/Bundle;", "savedInstanceState", "Landroid/view/View;", "onCreateView", "", "onMapLoaded", "onDestroyView", "onResume", "onPause", "outState", "onSaveInstanceState", "onViewStateRestored", "onLowMemory", "v", "onClick", "Lmoji/com/mjweatherservicebase/card/RFlowersMapInfo;", "map", "", "mLat", "mLon", "setData", "Lmoji/com/mjweatherservicebase/card/ShareCallback;", "callback", "getShareBitmap", "Lmoji/com/mjweatherservicebase/BaseFlowersMainPresenter;", "sakuraFlowerMainPresenter", "setP", "e", "loadData", "j", "Lcom/amap/api/maps/model/LatLng;", "latLng", "updateUserClickedMarker", "", "Lcom/moji/common/bean/spot/SpotMaps$spot_maps$spot_map;", "attraction_list", "i", "d", "Lcom/amap/api/maps/TextureMapView;", "t", "Lcom/amap/api/maps/TextureMapView;", "mMapView", "Lcom/amap/api/maps/AMap;", com.umeng.analytics.pro.bo.aN, "Lcom/amap/api/maps/AMap;", "mAMap", "Landroid/widget/ImageView;", "Landroid/widget/ImageView;", "mMyLocation", com.baidu.mobads.sdk.api.IAdInterListener.AdReqParam.WIDTH, "Landroid/view/View;", "mMapMaskView", "x", "ivSymbolIcon", "Landroid/widget/TextView;", "y", "Landroid/widget/TextView;", "tvClickCheckOutSpot", com.umeng.analytics.pro.bo.aJ, "tvClickCountrySpot", "Landroid/widget/LinearLayout;", androidx.exifinterface.media.ExifInterface.GPS_MEASUREMENT_IN_PROGRESS, "Landroid/widget/LinearLayout;", "mLLTip", "B", "Lcom/amap/api/maps/model/LatLng;", "mMyLoc", "C", "Lmoji/com/mjweatherservicebase/card/RFlowersMapInfo;", "mData", "", "D", "Z", "mHasLoc", androidx.exifinterface.media.ExifInterface.LONGITUDE_EAST, "mDataReady", "F", "mMapReady", "Lcom/amap/api/maps/model/Marker;", "G", "Lcom/amap/api/maps/model/Marker;", "mSelectedMarker", "H", "mLocationMarker", "Ljava/util/ArrayList;", "I", "Ljava/util/ArrayList;", "mCurrentMarkers", "<init>", "()V", "Companion", "MJWeatherServiceBase_release"}, k = 1, mv = {1, 6, 0})
/* loaded from: classes20.dex */
public final class RFlowersMapFragment extends com.moji.base.MJFragment implements android.view.View.OnClickListener, com.amap.api.maps.AMap.OnMapLoadedListener {

    /* renamed from: A, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public android.widget.LinearLayout mLLTip;

    /* renamed from: C, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public moji.com.mjweatherservicebase.card.RFlowersMapInfo mData;

    /* renamed from: D, reason: from kotlin metadata */
    public boolean mHasLoc;

    /* renamed from: E, reason: from kotlin metadata */
    public boolean mDataReady;

    /* renamed from: F, reason: from kotlin metadata */
    public boolean mMapReady;

    /* renamed from: G, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public com.amap.api.maps.model.Marker mSelectedMarker;

    /* renamed from: H, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public com.amap.api.maps.model.Marker mLocationMarker;

    /* renamed from: t, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public com.amap.api.maps.TextureMapView mMapView;

    /* renamed from: u, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public com.amap.api.maps.AMap mAMap;

    /* renamed from: v, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public android.widget.ImageView mMyLocation;

    /* renamed from: w, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public android.view.View mMapMaskView;

    /* renamed from: x, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public android.widget.ImageView ivSymbolIcon;

    /* renamed from: y, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public android.widget.TextView tvClickCheckOutSpot;

    /* renamed from: z, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public android.widget.TextView tvClickCountrySpot;

    /* renamed from: B, reason: from kotlin metadata */
    @org.jetbrains.annotations.NotNull
    public com.amap.api.maps.model.LatLng mMyLoc = new com.amap.api.maps.model.LatLng(38.8289d, 102.4543d);

    /* renamed from: I, reason: from kotlin metadata */
    @org.jetbrains.annotations.NotNull
    public java.util.ArrayList<com.amap.api.maps.model.Marker> mCurrentMarkers = new java.util.ArrayList<>();

    /* JADX WARN: Multi-variable type inference failed */
    public static final boolean f(moji.com.mjweatherservicebase.card.RFlowersMapFragment this$0, com.amap.api.maps.model.Marker marker) {
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(this$0, "this$0");
        com.amap.api.maps.model.Marker marker2 = this$0.mLocationMarker;
        if (marker2 != null) {
            if (marker != null && marker.equals(marker2)) {
                return true;
            }
        }
        if (this$0.mSelectedMarker != null) {
            android.content.res.Resources resources = this$0.getResources();
            moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter = moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE.getFlowersMainPresenter();
            kotlin.jvm.internal.Intrinsics.checkNotNull(flowersMainPresenter);
            android.graphics.Bitmap decodeResource = android.graphics.BitmapFactory.decodeResource(resources, flowersMainPresenter.flowerMapIconRes());
            com.amap.api.maps.model.Marker marker3 = this$0.mSelectedMarker;
            if (marker3 != null) {
                marker3.setIcon(com.amap.api.maps.model.BitmapDescriptorFactory.fromBitmap(decodeResource));
            }
            com.amap.api.maps.model.Marker marker4 = this$0.mSelectedMarker;
            if (marker4 != null) {
                marker4.hideInfoWindow();
            }
            this$0.mSelectedMarker = null;
        }
        android.content.res.Resources resources2 = this$0.getResources();
        moji.com.mjweatherservicebase.BaseHomePageActivity.Companion companion = moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE;
        moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter2 = companion.getFlowersMainPresenter();
        kotlin.jvm.internal.Intrinsics.checkNotNull(flowersMainPresenter2);
        android.graphics.Bitmap decodeResource2 = android.graphics.BitmapFactory.decodeResource(resources2, flowersMainPresenter2.flowerMapClickIconRes());
        if (marker != null) {
            marker.setIcon(com.amap.api.maps.model.BitmapDescriptorFactory.fromBitmap(decodeResource2));
        }
        if (marker != null) {
            marker.showInfoWindow();
        }
        this$0.mSelectedMarker = marker;
        com.amap.api.maps.AMap aMap = this$0.mAMap;
        if (aMap != null) {
            aMap.animateCamera(com.amap.api.maps.CameraUpdateFactory.newLatLng(marker != null ? marker.getPosition() : null));
        }
        java.lang.Object object = marker != null ? marker.getObject() : null;
        if (object instanceof com.moji.common.bean.spot.SpotMaps.spot_maps.spot_map) {
            java.lang.String valueOf = java.lang.String.valueOf(((com.moji.common.bean.spot.SpotMaps.spot_maps.spot_map) object).getSpotId());
            moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter3 = companion.getFlowersMainPresenter();
            if (flowersMainPresenter3 != null) {
                org.json.JSONObject property = com.moji.statistics.EventParams.getProperty(new java.lang.Object[]{valueOf});
                kotlin.jvm.internal.Intrinsics.checkNotNullExpressionValue(property, "getProperty(attractionId)");
                flowersMainPresenter3.eventMapNameClick("1", property);
            }
        }
        return true;
    }

    /* JADX WARN: Multi-variable type inference failed */
    public static final void g(moji.com.mjweatherservicebase.card.RFlowersMapFragment this$0, com.amap.api.maps.model.Marker marker) {
        moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter;
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(this$0, "this$0");
        java.lang.Object object = marker != null ? marker.getObject() : null;
        if (object instanceof com.moji.common.bean.spot.SpotMaps.spot_maps.spot_map) {
            int spotId = (int) ((com.moji.common.bean.spot.SpotMaps.spot_maps.spot_map) object).getSpotId();
            if (spotId > 0 && (flowersMainPresenter = moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE.getFlowersMainPresenter()) != null) {
                flowersMainPresenter.openDetailActivity(spotId);
            }
            android.content.res.Resources resources = this$0.getResources();
            moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter2 = moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE.getFlowersMainPresenter();
            kotlin.jvm.internal.Intrinsics.checkNotNull(flowersMainPresenter2);
            marker.setIcon(com.amap.api.maps.model.BitmapDescriptorFactory.fromBitmap(android.graphics.BitmapFactory.decodeResource(resources, flowersMainPresenter2.flowerMapIconRes())));
            marker.setAnchor(0.5f, 0.5f);
            marker.hideInfoWindow();
            this$0.mSelectedMarker = null;
        }
    }

    /* JADX WARN: Multi-variable type inference failed */
    public static final void h(moji.com.mjweatherservicebase.card.RFlowersMapFragment this$0, com.amap.api.maps.model.LatLng latLng) {
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(this$0, "this$0");
        if (this$0.mSelectedMarker != null) {
            android.content.res.Resources resources = this$0.getResources();
            moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter = moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE.getFlowersMainPresenter();
            kotlin.jvm.internal.Intrinsics.checkNotNull(flowersMainPresenter);
            android.graphics.Bitmap decodeResource = android.graphics.BitmapFactory.decodeResource(resources, flowersMainPresenter.flowerMapIconRes());
            com.amap.api.maps.model.Marker marker = this$0.mSelectedMarker;
            if (marker != null) {
                marker.setIcon(com.amap.api.maps.model.BitmapDescriptorFactory.fromBitmap(decodeResource));
            }
            com.amap.api.maps.model.Marker marker2 = this$0.mSelectedMarker;
            if (marker2 != null) {
                marker2.hideInfoWindow();
            }
            this$0.mSelectedMarker = null;
        }
    }

    public final void d() {
        com.amap.api.maps.AMap aMap = this.mAMap;
        if (aMap != null) {
            aMap.animateCamera(com.amap.api.maps.CameraUpdateFactory.newLatLngZoom(this.mMyLoc, 6.8f));
        }
    }

    public final void e(android.os.Bundle savedInstanceState) {
        com.amap.api.maps.TextureMapView textureMapView = this.mMapView;
        if (textureMapView == null) {
            return;
        }
        if (textureMapView != null) {
            textureMapView.onCreate(savedInstanceState);
        }
        com.amap.api.maps.TextureMapView textureMapView2 = this.mMapView;
        com.amap.api.maps.AMap map = textureMapView2 != null ? textureMapView2.getMap() : null;
        this.mAMap = map;
        com.amap.api.maps.UiSettings uiSettings = map != null ? map.getUiSettings() : null;
        if (uiSettings != null) {
            uiSettings.setCompassEnabled(false);
        }
        com.amap.api.maps.AMap aMap = this.mAMap;
        com.amap.api.maps.UiSettings uiSettings2 = aMap != null ? aMap.getUiSettings() : null;
        if (uiSettings2 != null) {
            uiSettings2.setScaleControlsEnabled(false);
        }
        com.amap.api.maps.AMap aMap2 = this.mAMap;
        com.amap.api.maps.UiSettings uiSettings3 = aMap2 != null ? aMap2.getUiSettings() : null;
        if (uiSettings3 != null) {
            uiSettings3.setZoomControlsEnabled(false);
        }
        com.amap.api.maps.AMap aMap3 = this.mAMap;
        com.amap.api.maps.UiSettings uiSettings4 = aMap3 != null ? aMap3.getUiSettings() : null;
        if (uiSettings4 != null) {
            uiSettings4.setMyLocationButtonEnabled(false);
        }
        com.amap.api.maps.AMap aMap4 = this.mAMap;
        com.amap.api.maps.UiSettings uiSettings5 = aMap4 != null ? aMap4.getUiSettings() : null;
        if (uiSettings5 != null) {
            uiSettings5.setTiltGesturesEnabled(false);
        }
        com.amap.api.maps.AMap aMap5 = this.mAMap;
        com.amap.api.maps.UiSettings uiSettings6 = aMap5 != null ? aMap5.getUiSettings() : null;
        if (uiSettings6 != null) {
            uiSettings6.setRotateGesturesEnabled(false);
        }
        com.amap.api.maps.AMap aMap6 = this.mAMap;
        if (aMap6 != null) {
            aMap6.setMinZoomLevel(4.0f);
        }
        com.amap.api.maps.AMap aMap7 = this.mAMap;
        if (aMap7 != null) {
            aMap7.setMaxZoomLevel(17.0f);
        }
        com.amap.api.maps.AMap aMap8 = this.mAMap;
        if (aMap8 != null) {
            aMap8.addOnMapLoadedListener(this);
        }
    }

    public final void getShareBitmap(@org.jetbrains.annotations.NotNull moji.com.mjweatherservicebase.card.ShareCallback callback) {
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(callback, "callback");
        com.amap.api.maps.AMap aMap = this.mAMap;
        if (aMap == null) {
            callback.onBack(null);
        } else if (aMap != null) {
            aMap.getMapScreenShot(new moji.com.mjweatherservicebase.card.RFlowersMapFragment$getShareBitmap$1(callback, this));
        }
    }

    /* JADX WARN: Multi-variable type inference failed */
    public final void i(java.util.List<com.moji.common.bean.spot.SpotMaps.spot_maps.spot_map> attraction_list) {
        if (this.mAMap == null || getActivity() == null || !isAdded() || isDetached()) {
            return;
        }
        com.moji.tool.log.MJLogger.d("RFlowersMapFragment", "refreshMarker: ");
        java.util.Iterator<com.amap.api.maps.model.Marker> it = this.mCurrentMarkers.iterator();
        while (it.hasNext()) {
            it.next().remove();
        }
        this.mCurrentMarkers.clear();
        android.content.res.Resources resources = getResources();
        moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter = moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE.getFlowersMainPresenter();
        kotlin.jvm.internal.Intrinsics.checkNotNull(flowersMainPresenter);
        android.graphics.Bitmap decodeResource = android.graphics.BitmapFactory.decodeResource(resources, flowersMainPresenter.flowerMapClickIconRes());
        for (com.moji.common.bean.spot.SpotMaps.spot_maps.spot_map spot_mapVar : attraction_list) {
            com.amap.api.maps.model.LatLng latLng = new com.amap.api.maps.model.LatLng(spot_mapVar.getLat(), spot_mapVar.getLon());
            android.content.res.Resources resources2 = getResources();
            moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter2 = moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE.getFlowersMainPresenter();
            kotlin.jvm.internal.Intrinsics.checkNotNull(flowersMainPresenter2);
            com.amap.api.maps.model.MarkerOptions flat = new com.amap.api.maps.model.MarkerOptions().position(latLng).icon(com.amap.api.maps.model.BitmapDescriptorFactory.fromBitmap(android.graphics.BitmapFactory.decodeResource(resources2, flowersMainPresenter2.flowerMapIconRes()))).setInfoWindowOffset(0, decodeResource.getHeight() / 2).anchor(0.5f, 0.5f).draggable(false).setFlat(true);
            com.amap.api.maps.AMap aMap = this.mAMap;
            com.amap.api.maps.model.Marker addMarker = aMap != null ? aMap.addMarker(flat) : null;
            if (addMarker != null) {
                addMarker.setObject(spot_mapVar);
                this.mCurrentMarkers.add(addMarker);
            }
        }
    }

    public final void j() {
        if (this.mAMap == null) {
            return;
        }
        com.moji.tool.log.MJLogger.d("RFlowersMapFragment", "showCountry: ");
        com.amap.api.maps.model.CameraPosition build = com.amap.api.maps.model.CameraPosition.builder().target(new com.amap.api.maps.model.LatLng(38.8289d, 102.4543d)).zoom(1.8f).build();
        com.amap.api.maps.AMap aMap = this.mAMap;
        if (aMap != null) {
            aMap.animateCamera(com.amap.api.maps.CameraUpdateFactory.newCameraPosition(build));
        }
    }

    public final void loadData() {
        moji.com.mjweatherservicebase.card.RFlowersMapInfo rFlowersMapInfo;
        com.moji.tool.log.MJLogger.d("sflower", "loadData:" + this.mMapReady + ",mDataReady:" + this.mDataReady);
        if (this.mMapReady && this.mDataReady) {
            if (this.mAMap != null && (rFlowersMapInfo = this.mData) != null) {
                kotlin.jvm.internal.Intrinsics.checkNotNull(rFlowersMapInfo);
                java.util.List<com.moji.common.bean.spot.SpotMaps.spot_maps.spot_map> map = rFlowersMapInfo.getMap();
                kotlin.jvm.internal.Intrinsics.checkNotNull(map);
                java.util.List<com.moji.common.bean.spot.SpotMaps.spot_maps.spot_map> list = map;
                if (!(list == null || list.isEmpty())) {
                    if (this.mHasLoc) {
                        com.amap.api.maps.AMap aMap = this.mAMap;
                        if (aMap != null) {
                            aMap.animateCamera(com.amap.api.maps.CameraUpdateFactory.newLatLngZoom(this.mMyLoc, 6.8f));
                        }
                    } else {
                        j();
                    }
                    moji.com.mjweatherservicebase.card.RFlowersMapInfo rFlowersMapInfo2 = this.mData;
                    kotlin.jvm.internal.Intrinsics.checkNotNull(rFlowersMapInfo2);
                    java.util.List<com.moji.common.bean.spot.SpotMaps.spot_maps.spot_map> map2 = rFlowersMapInfo2.getMap();
                    kotlin.jvm.internal.Intrinsics.checkNotNull(map2);
                    i(map2);
                    if (this.mHasLoc) {
                        updateUserClickedMarker(this.mMyLoc);
                        android.widget.ImageView imageView = this.mMyLocation;
                        kotlin.jvm.internal.Intrinsics.checkNotNull(imageView);
                        imageView.setVisibility(0);
                    }
                    android.view.View view = this.mMapMaskView;
                    kotlin.jvm.internal.Intrinsics.checkNotNull(view);
                    view.setVisibility(8);
                    android.widget.LinearLayout linearLayout = this.mLLTip;
                    kotlin.jvm.internal.Intrinsics.checkNotNull(linearLayout);
                    linearLayout.setVisibility(0);
                    return;
                }
            }
            j();
        }
    }

    @Override // android.view.View.OnClickListener
    @com.sensorsdata.analytics.android.sdk.SensorsDataInstrumented
    public void onClick(@org.jetbrains.annotations.NotNull android.view.View v) {
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(v, "v");
        if (v == this.mMyLocation) {
            d();
            moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter = moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE.getFlowersMainPresenter();
            if (flowersMainPresenter != null) {
                flowersMainPresenter.eventMapLocationClick();
            }
        }
        com.sensorsdata.analytics.android.autotrack.aop.SensorsDataAutoTrackHelper.trackViewOnClick(v);
    }

    /* JADX WARN: Multi-variable type inference failed */
    @org.jetbrains.annotations.Nullable
    public android.view.View onCreateView(@org.jetbrains.annotations.NotNull android.view.LayoutInflater inflater, @org.jetbrains.annotations.Nullable android.view.ViewGroup container, @org.jetbrains.annotations.Nullable android.os.Bundle savedInstanceState) {
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(inflater, "inflater");
        if (getActivity() == null) {
            return null;
        }
        if (!com.moji.base.mapbox.MapNativeLibLoader.isSoLoaded()) {
            com.moji.tool.ToastTool.showToast(moji.com.mjweatherservicebase.R.string.mapbox_map_load_error);
            com.moji.base.mapbox.MapNativeLibLoader.initMapbox(getActivity(), com.moji.tool.log.MJLogger.isDevelopMode());
            com.moji.tool.log.MJLogger.e("RFlowersMapFragment", "map nativeLib not initialized");
            if (getActivity() != null) {
                androidx.fragment.app.FragmentActivity activity = getActivity();
                if (activity == null) {
                    throw new java.lang.NullPointerException("null cannot be cast to non-null type androidx.fragment.app.FragmentActivity");
                }
                activity.finish();
            }
            return null;
        }
        android.view.View inflate = inflater.inflate(moji.com.mjweatherservicebase.R.layout.fragment_rflowers_map, container, false);
        this.mMapView = (com.amap.api.maps.TextureMapView) inflate.findViewById(moji.com.mjweatherservicebase.R.id.flowers_map);
        android.widget.ImageView imageView = (android.widget.ImageView) inflate.findViewById(moji.com.mjweatherservicebase.R.id.map_symbol_icon);
        this.ivSymbolIcon = imageView;
        if (imageView != null) {
            moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter = moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE.getFlowersMainPresenter();
            kotlin.jvm.internal.Intrinsics.checkNotNull(flowersMainPresenter);
            imageView.setImageResource(flowersMainPresenter.flowerMapIconRes());
        }
        android.widget.TextView textView = (android.widget.TextView) inflate.findViewById(moji.com.mjweatherservicebase.R.id.check_out_spot);
        this.tvClickCheckOutSpot = textView;
        if (textView != null) {
            moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter2 = moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE.getFlowersMainPresenter();
            kotlin.jvm.internal.Intrinsics.checkNotNull(flowersMainPresenter2);
            textView.setText(flowersMainPresenter2.flowerMapIconTextRes());
        }
        android.widget.TextView textView2 = (android.widget.TextView) inflate.findViewById(moji.com.mjweatherservicebase.R.id.country_spot);
        this.tvClickCountrySpot = textView2;
        if (textView2 != null) {
            moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter3 = moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE.getFlowersMainPresenter();
            kotlin.jvm.internal.Intrinsics.checkNotNull(flowersMainPresenter3);
            textView2.setText(flowersMainPresenter3.flowerMapCountrySpoTextRes());
        }
        this.mLLTip = (android.widget.LinearLayout) inflate.findViewById(moji.com.mjweatherservicebase.R.id.ll_red_leaves_scene_map_tip);
        this.mMapMaskView = inflate.findViewById(moji.com.mjweatherservicebase.R.id.map_mask);
        android.widget.ImageView imageView2 = (android.widget.ImageView) inflate.findViewById(moji.com.mjweatherservicebase.R.id.iv_my_location);
        this.mMyLocation = imageView2;
        if (imageView2 != null) {
            imageView2.setOnClickListener(this);
        }
        android.widget.ImageView imageView3 = this.mMyLocation;
        if (imageView3 != null) {
            imageView3.setVisibility(4);
        }
        e(savedInstanceState);
        return inflate;
    }

    /* JADX WARN: Multi-variable type inference failed */
    public void onDestroyView() {
        super/*androidx.fragment.app.Fragment*/.onDestroyView();
        com.amap.api.maps.TextureMapView textureMapView = this.mMapView;
        if (textureMapView != null) {
            textureMapView.onDestroy();
        }
    }

    /* JADX WARN: Multi-variable type inference failed */
    public void onLowMemory() {
        super/*androidx.fragment.app.Fragment*/.onLowMemory();
        com.amap.api.maps.TextureMapView textureMapView = this.mMapView;
        if (textureMapView != null) {
            textureMapView.onLowMemory();
        }
    }

    @Override // com.amap.api.maps.AMap.OnMapLoadedListener
    public void onMapLoaded() {
        com.amap.api.maps.AMap aMap = this.mAMap;
        if (aMap != null) {
            aMap.setOnMarkerClickListener(new defpackage.d72(this));
        }
        com.amap.api.maps.AMap aMap2 = this.mAMap;
        if (aMap2 != null) {
            aMap2.setOnInfoWindowClickListener(new defpackage.e72(this));
        }
        com.amap.api.maps.AMap aMap3 = this.mAMap;
        if (aMap3 != null) {
            aMap3.setOnMapClickListener(new defpackage.f72(this));
        }
        com.amap.api.maps.AMap aMap4 = this.mAMap;
        if (aMap4 != null) {
            aMap4.setInfoWindowAdapter(new moji.com.mjweatherservicebase.card.RFlowersMapFragment$onMapLoaded$4(this));
        }
        this.mMapReady = true;
        com.moji.tool.log.MJLogger.d("sflower", "onMapLoaded:true,mDataReady:" + this.mDataReady);
        loadData();
    }

    public void onPause() {
        super.onPause();
        com.amap.api.maps.TextureMapView textureMapView = this.mMapView;
        if (textureMapView != null) {
            textureMapView.onPause();
        }
    }

    public void onResume() {
        super.onResume();
        com.amap.api.maps.TextureMapView textureMapView = this.mMapView;
        if (textureMapView != null) {
            textureMapView.onResume();
        }
    }

    /* JADX WARN: Multi-variable type inference failed */
    public void onSaveInstanceState(@org.jetbrains.annotations.NotNull android.os.Bundle outState) {
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(outState, "outState");
        super/*androidx.fragment.app.Fragment*/.onSaveInstanceState(outState);
        com.amap.api.maps.TextureMapView textureMapView = this.mMapView;
        if (textureMapView != null) {
            textureMapView.onSaveInstanceState(outState);
        }
        outState.putSerializable("mapData", this.mData);
        outState.putSerializable("mLat", java.lang.Double.valueOf(this.mMyLoc.latitude));
        outState.putSerializable("mLon", java.lang.Double.valueOf(this.mMyLoc.longitude));
    }

    /* JADX WARN: Multi-variable type inference failed */
    public void onViewStateRestored(@org.jetbrains.annotations.Nullable android.os.Bundle savedInstanceState) {
        super/*androidx.fragment.app.Fragment*/.onViewStateRestored(savedInstanceState);
        if ((savedInstanceState != null ? savedInstanceState.getSerializable("mapData") : null) != null) {
            java.io.Serializable serializable = savedInstanceState.getSerializable("mapData");
            if (serializable == null) {
                throw new java.lang.NullPointerException("null cannot be cast to non-null type moji.com.mjweatherservicebase.card.RFlowersMapInfo");
            }
            this.mData = (moji.com.mjweatherservicebase.card.RFlowersMapInfo) serializable;
            double d = savedInstanceState.getDouble("mLat");
            double d2 = savedInstanceState.getDouble("mLon");
            if (com.moji.location.util.LocationUtil.isLatLanValid(d, d2)) {
                this.mMyLoc = new com.amap.api.maps.model.LatLng(d, d2);
                this.mHasLoc = true;
            }
            com.moji.tool.log.MJLogger.d("RFlowersMapFragment", "setData:  lat = " + d + "; lon = " + d2);
            this.mDataReady = true;
            com.moji.tool.log.MJLogger.d("sflower", "onViewStateRestored:" + this.mMapReady + ",mDataReady:true");
            loadData();
        }
    }

    public final void setData(@org.jetbrains.annotations.Nullable moji.com.mjweatherservicebase.card.RFlowersMapInfo map, double mLat, double mLon) {
        if (map != null) {
            this.mData = map;
            if (com.moji.location.util.LocationUtil.isLatLanValid(mLat, mLon)) {
                this.mMyLoc = new com.amap.api.maps.model.LatLng(mLat, mLon);
                this.mHasLoc = true;
            }
        }
        com.moji.tool.log.MJLogger.d("RFlowersMapFragment", "setData:  lat = " + mLat + "; lon = " + mLon);
        this.mDataReady = true;
        java.lang.StringBuilder sb = new java.lang.StringBuilder();
        sb.append("setData:");
        sb.append(true);
        com.moji.tool.log.MJLogger.d("sflower", sb.toString());
        loadData();
    }

    public final void setP(@org.jetbrains.annotations.NotNull moji.com.mjweatherservicebase.BaseFlowersMainPresenter sakuraFlowerMainPresenter) {
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(sakuraFlowerMainPresenter, "sakuraFlowerMainPresenter");
        moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE.setFlowersMainPresenter(sakuraFlowerMainPresenter);
    }

    /* JADX WARN: Multi-variable type inference failed */
    public final void updateUserClickedMarker(com.amap.api.maps.model.LatLng latLng) {
        if (this.mAMap == null) {
            return;
        }
        com.amap.api.maps.model.Marker marker = this.mLocationMarker;
        if (marker != null) {
            if (marker != null) {
                marker.remove();
            }
            this.mLocationMarker = null;
        }
        com.amap.api.maps.model.MarkerOptions flat = new com.amap.api.maps.model.MarkerOptions().position(latLng).icon(com.amap.api.maps.model.BitmapDescriptorFactory.fromBitmap(android.graphics.BitmapFactory.decodeResource(getResources(), moji.com.mjweatherservicebase.R.drawable.short_time_map_myposition))).anchor(0.5f, 0.5f).draggable(false).setFlat(true);
        com.amap.api.maps.AMap aMap = this.mAMap;
        this.mLocationMarker = aMap != null ? aMap.addMarker(flat) : null;
    }
}
