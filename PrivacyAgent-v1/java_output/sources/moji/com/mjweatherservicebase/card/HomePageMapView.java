package moji.com.mjweatherservicebase.card;

@kotlin.Metadata(d1 = {"\u0000l\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0002\u0010\b\n\u0000\n\u0002\u0018\u0002\n\u0000\n\u0002\u0010\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\n\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0010\u0006\n\u0002\b\u0004\n\u0002\u0010\u000e\n\u0002\b\b\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\u0005\n\u0002\u0010\u000b\n\u0002\b\u0006\u0018\u00002\b\u0012\u0004\u0012\u00020\u00020\u00012\u00020\u0003B3\u0012\u0006\u0010\u001e\u001a\u00020\u001b\u0012\u0006\u0010!\u001a\u00020\u001f\u0012\u0006\u0010#\u001a\u00020\u001f\u0012\b\u0010'\u001a\u0004\u0018\u00010$\u0012\b\u0010)\u001a\u0004\u0018\u00010$¢\u0006\u0004\b?\u0010@J\b\u0010\u0005\u001a\u00020\u0004H\u0014J\u0012\u0010\t\u001a\u00020\b2\b\u0010\u0007\u001a\u0004\u0018\u00010\u0006H\u0014J\u0012\u0010\u000b\u001a\u00020\b2\b\u0010\n\u001a\u0004\u0018\u00010\u0002H\u0014J\u001a\u0010\u000f\u001a\u00020\b2\b\u0010\r\u001a\u0004\u0018\u00010\f2\u0006\u0010\u000e\u001a\u00020\u0004H\u0016J\u000e\u0010\u0012\u001a\u00020\b2\u0006\u0010\u0011\u001a\u00020\u0010J\b\u0010\u0013\u001a\u00020\bH\u0002J\b\u0010\u0014\u001a\u00020\bH\u0002J\b\u0010\u0015\u001a\u00020\bH\u0002J\b\u0010\u0016\u001a\u00020\bH\u0002J\b\u0010\u0017\u001a\u00020\bH\u0002J\b\u0010\u0018\u001a\u00020\bH\u0002J\b\u0010\u0019\u001a\u00020\bH\u0002J\b\u0010\u001a\u001a\u00020\bH\u0002R\u0014\u0010\u001e\u001a\u00020\u001b8\u0002X\u0082\u0004¢\u0006\u0006\n\u0004\b\u001c\u0010\u001dR\u0014\u0010!\u001a\u00020\u001f8\u0002X\u0082\u0004¢\u0006\u0006\n\u0004\b\n\u0010 R\u0014\u0010#\u001a\u00020\u001f8\u0002X\u0082\u0004¢\u0006\u0006\n\u0004\b\"\u0010 R\u0016\u0010'\u001a\u0004\u0018\u00010$8\u0002X\u0082\u0004¢\u0006\u0006\n\u0004\b%\u0010&R\u0016\u0010)\u001a\u0004\u0018\u00010$8\u0002X\u0082\u0004¢\u0006\u0006\n\u0004\b(\u0010&R\u0016\u0010,\u001a\u00020\f8\u0002@\u0002X\u0082.¢\u0006\u0006\n\u0004\b*\u0010+R\u0016\u00100\u001a\u00020-8\u0002@\u0002X\u0082.¢\u0006\u0006\n\u0004\b.\u0010/R\u0016\u00104\u001a\u0002018\u0002@\u0002X\u0082.¢\u0006\u0006\n\u0004\b2\u00103R\u001a\u00108\u001a\u0006\u0012\u0002\b\u0003058\u0002@\u0002X\u0082.¢\u0006\u0006\n\u0004\b6\u00107R\u0016\u0010:\u001a\u00020$8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\b9\u0010&R\u0016\u0010>\u001a\u00020;8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\b<\u0010=¨\u0006A"}, d2 = {"Lmoji/com/mjweatherservicebase/card/HomePageMapView;", "Lcom/moji/viewcontrol/MJViewControl;", "Lmoji/com/mjweatherservicebase/card/RFlowersMapInfo;", "Landroid/widget/RadioGroup$OnCheckedChangeListener;", "", "getResLayoutId", "Landroid/view/View;", com.anythink.expressad.a.B, "", "onCreatedView", "t", "onBindViewData", "Landroid/widget/RadioGroup;", "group", "checkedId", "onCheckedChanged", "Lmoji/com/mjweatherservicebase/card/ShareCallback;", "callback", "getShareBitmap", "k", "l", com.anythink.expressad.d.a.b.dH, "showLoading", "hideLoading", "j", "i", "loadFailed", "Landroidx/fragment/app/FragmentActivity;", com.baidu.mobads.sdk.api.IAdInterListener.AdReqParam.AD_COUNT, "Landroidx/fragment/app/FragmentActivity;", "activity", "", "D", "mLat", com.umeng.analytics.pro.bo.aN, "mLon", "", "v", "Ljava/lang/String;", "mapUrl", com.baidu.mobads.sdk.api.IAdInterListener.AdReqParam.WIDTH, "flowerType", "x", "Landroid/widget/RadioGroup;", "mRadioGroup", "Lmoji/com/mjweatherservicebase/card/RFlowersMapFragment;", "y", "Lmoji/com/mjweatherservicebase/card/RFlowersMapFragment;", "mSpotMapFragment", "Lmoji/com/mjweatherservicebase/card/RFlowersWNIMapFragment;", com.umeng.analytics.pro.bo.aJ, "Lmoji/com/mjweatherservicebase/card/RFlowersWNIMapFragment;", "mTrentFragment", "Lcom/moji/dialog/MJDialog;", androidx.exifinterface.media.ExifInterface.GPS_MEASUREMENT_IN_PROGRESS, "Lcom/moji/dialog/MJDialog;", "mLoadingDialog", "B", "mWniUrl", "", "C", "Z", "currentTrend", "<init>", "(Landroidx/fragment/app/FragmentActivity;DDLjava/lang/String;Ljava/lang/String;)V", "MJWeatherServiceBase_release"}, k = 1, mv = {1, 6, 0})
/* loaded from: classes20.dex */
public final class HomePageMapView extends com.moji.viewcontrol.MJViewControl<moji.com.mjweatherservicebase.card.RFlowersMapInfo> implements android.widget.RadioGroup.OnCheckedChangeListener {

    /* renamed from: A, reason: from kotlin metadata */
    public com.moji.dialog.MJDialog<?> mLoadingDialog;

    /* renamed from: B, reason: from kotlin metadata */
    @org.jetbrains.annotations.NotNull
    public java.lang.String mWniUrl;

    /* renamed from: C, reason: from kotlin metadata */
    public boolean currentTrend;

    /* renamed from: n, reason: from kotlin metadata */
    @org.jetbrains.annotations.NotNull
    public final androidx.fragment.app.FragmentActivity activity;

    /* renamed from: t, reason: from kotlin metadata */
    public final double mLat;

    /* renamed from: u, reason: from kotlin metadata */
    public final double mLon;

    /* renamed from: v, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public final java.lang.String mapUrl;

    /* renamed from: w, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public final java.lang.String flowerType;

    /* renamed from: x, reason: from kotlin metadata */
    public android.widget.RadioGroup mRadioGroup;

    /* renamed from: y, reason: from kotlin metadata */
    public moji.com.mjweatherservicebase.card.RFlowersMapFragment mSpotMapFragment;

    /* renamed from: z, reason: from kotlin metadata */
    public moji.com.mjweatherservicebase.card.RFlowersWNIMapFragment mTrentFragment;

    /* JADX WARN: 'super' call moved to the top of the method (can break code semantics) */
    public HomePageMapView(@org.jetbrains.annotations.NotNull androidx.fragment.app.FragmentActivity activity, double d, double d2, @org.jetbrains.annotations.Nullable java.lang.String str, @org.jetbrains.annotations.Nullable java.lang.String str2) {
        super(activity);
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(activity, "activity");
        this.activity = activity;
        this.mLat = d;
        this.mLon = d2;
        this.mapUrl = str;
        this.flowerType = str2;
        this.mWniUrl = "";
    }

    public int getResLayoutId() {
        return moji.com.mjweatherservicebase.R.layout.layout_rflowers_map;
    }

    public final void getShareBitmap(@org.jetbrains.annotations.NotNull moji.com.mjweatherservicebase.card.ShareCallback callback) {
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(callback, "callback");
        moji.com.mjweatherservicebase.card.RFlowersMapFragment rFlowersMapFragment = null;
        moji.com.mjweatherservicebase.card.RFlowersWNIMapFragment rFlowersWNIMapFragment = null;
        if (this.currentTrend) {
            moji.com.mjweatherservicebase.card.RFlowersWNIMapFragment rFlowersWNIMapFragment2 = this.mTrentFragment;
            if (rFlowersWNIMapFragment2 == null) {
                kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mTrentFragment");
            } else {
                rFlowersWNIMapFragment = rFlowersWNIMapFragment2;
            }
            rFlowersWNIMapFragment.getShareBitmap(callback);
            return;
        }
        moji.com.mjweatherservicebase.card.RFlowersMapFragment rFlowersMapFragment2 = this.mSpotMapFragment;
        if (rFlowersMapFragment2 == null) {
            kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mSpotMapFragment");
        } else {
            rFlowersMapFragment = rFlowersMapFragment2;
        }
        rFlowersMapFragment.getShareBitmap(callback);
    }

    public final void hideLoading() {
        android.app.Dialog dialog = this.mLoadingDialog;
        android.app.Dialog dialog2 = null;
        if (dialog == null) {
            kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mLoadingDialog");
            dialog = null;
        }
        if (dialog.isShowing()) {
            android.app.Dialog dialog3 = this.mLoadingDialog;
            if (dialog3 == null) {
                kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mLoadingDialog");
            } else {
                dialog2 = dialog3;
            }
            dialog2.dismiss();
        }
    }

    public final void i() {
        m();
    }

    public final void j() {
        new com.moji.tool.toast.MJTipView.Builder(this.activity).message(moji.com.mjweatherservicebase.R.string.rflowers_map_switch_failed).showMode(com.moji.tool.toast.MJTipView.TipMode.FAIL).show();
    }

    public final void k() {
        androidx.fragment.app.FragmentManager supportFragmentManager = this.activity.getSupportFragmentManager();
        kotlin.jvm.internal.Intrinsics.checkNotNullExpressionValue(supportFragmentManager, "activity.supportFragmentManager");
        androidx.fragment.app.FragmentTransaction beginTransaction = supportFragmentManager.beginTransaction();
        kotlin.jvm.internal.Intrinsics.checkNotNullExpressionValue(beginTransaction, "manager.beginTransaction()");
        if (this.mTrentFragment == null) {
            kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mTrentFragment");
        }
        com.moji.base.MJFragment mJFragment = this.mTrentFragment;
        com.moji.base.MJFragment mJFragment2 = null;
        if (mJFragment == null) {
            kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mTrentFragment");
            mJFragment = null;
        }
        beginTransaction.hide(mJFragment);
        if (supportFragmentManager.findFragmentByTag("spotMapFragment") == null) {
            int i = moji.com.mjweatherservicebase.R.id.map_view;
            com.moji.base.MJFragment mJFragment3 = this.mSpotMapFragment;
            if (mJFragment3 == null) {
                kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mSpotMapFragment");
                mJFragment3 = null;
            }
            beginTransaction.add(i, (androidx.fragment.app.Fragment) mJFragment3, "spotMapFragment");
            com.moji.base.MJFragment mJFragment4 = this.mSpotMapFragment;
            if (mJFragment4 == null) {
                kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mSpotMapFragment");
            } else {
                mJFragment2 = mJFragment4;
            }
            beginTransaction.show(mJFragment2);
        } else {
            com.moji.base.MJFragment mJFragment5 = this.mSpotMapFragment;
            if (mJFragment5 == null) {
                kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mSpotMapFragment");
            } else {
                mJFragment2 = mJFragment5;
            }
            beginTransaction.show(mJFragment2);
        }
        beginTransaction.commitAllowingStateLoss();
        this.currentTrend = false;
    }

    public final void l() {
        if (android.text.TextUtils.isEmpty(this.mWniUrl)) {
            loadFailed();
        } else {
            showLoading();
            com.bumptech.glide.Glide.with(getContext()).asBitmap().load(this.mWniUrl).into((com.bumptech.glide.RequestBuilder<android.graphics.Bitmap>) new moji.com.mjweatherservicebase.card.HomePageMapView$showTrendFragment$1(this));
        }
    }

    public final void loadFailed() {
        android.widget.RadioGroup radioGroup = this.mRadioGroup;
        if (radioGroup == null) {
            kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mRadioGroup");
            radioGroup = null;
        }
        radioGroup.check(moji.com.mjweatherservicebase.R.id.map_type_spot);
        j();
    }

    public final void m() {
        androidx.fragment.app.FragmentManager supportFragmentManager = this.activity.getSupportFragmentManager();
        kotlin.jvm.internal.Intrinsics.checkNotNullExpressionValue(supportFragmentManager, "activity.supportFragmentManager");
        androidx.fragment.app.FragmentTransaction beginTransaction = supportFragmentManager.beginTransaction();
        kotlin.jvm.internal.Intrinsics.checkNotNullExpressionValue(beginTransaction, "manager.beginTransaction()");
        if (this.mSpotMapFragment == null) {
            kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mSpotMapFragment");
        }
        com.moji.base.MJFragment mJFragment = this.mSpotMapFragment;
        com.moji.base.MJFragment mJFragment2 = null;
        if (mJFragment == null) {
            kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mSpotMapFragment");
            mJFragment = null;
        }
        beginTransaction.hide(mJFragment);
        if (supportFragmentManager.findFragmentByTag("trentFragment") == null) {
            android.os.Bundle bundle = new android.os.Bundle();
            bundle.putString(moji.com.mjweatherservicebase.BigImageActivity.KEY_BUNDLE_URL, this.mapUrl);
            bundle.putString("from", this.flowerType);
            com.moji.base.MJFragment mJFragment3 = this.mTrentFragment;
            if (mJFragment3 == null) {
                kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mTrentFragment");
                mJFragment3 = null;
            }
            mJFragment3.setArguments(bundle);
            int i = moji.com.mjweatherservicebase.R.id.map_view;
            com.moji.base.MJFragment mJFragment4 = this.mTrentFragment;
            if (mJFragment4 == null) {
                kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mTrentFragment");
                mJFragment4 = null;
            }
            beginTransaction.add(i, (androidx.fragment.app.Fragment) mJFragment4, "trentFragment");
            com.moji.base.MJFragment mJFragment5 = this.mTrentFragment;
            if (mJFragment5 == null) {
                kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mTrentFragment");
            } else {
                mJFragment2 = mJFragment5;
            }
            beginTransaction.show(mJFragment2);
        } else {
            com.moji.base.MJFragment mJFragment6 = this.mTrentFragment;
            if (mJFragment6 == null) {
                kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mTrentFragment");
            } else {
                mJFragment2 = mJFragment6;
            }
            beginTransaction.show(mJFragment2);
        }
        beginTransaction.commitAllowingStateLoss();
        this.currentTrend = true;
    }

    public void onBindViewData(@org.jetbrains.annotations.Nullable moji.com.mjweatherservicebase.card.RFlowersMapInfo t) {
        k();
        moji.com.mjweatherservicebase.card.RFlowersMapFragment rFlowersMapFragment = this.mSpotMapFragment;
        if (rFlowersMapFragment == null) {
            kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mSpotMapFragment");
            rFlowersMapFragment = null;
        }
        rFlowersMapFragment.setData(t, this.mLat, this.mLon);
        if (android.text.TextUtils.isEmpty(this.mapUrl)) {
            return;
        }
        java.lang.String str = this.mapUrl;
        kotlin.jvm.internal.Intrinsics.checkNotNull(str);
        this.mWniUrl = str;
    }

    @Override // android.widget.RadioGroup.OnCheckedChangeListener
    @com.sensorsdata.analytics.android.sdk.SensorsDataInstrumented
    public void onCheckedChanged(@org.jetbrains.annotations.Nullable android.widget.RadioGroup group, int checkedId) {
        if (checkedId == moji.com.mjweatherservicebase.R.id.map_type_spot) {
            k();
            moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter = moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE.getFlowersMainPresenter();
            if (flowersMainPresenter != null) {
                flowersMainPresenter.eventMapSpotClick();
            }
        } else if (checkedId == moji.com.mjweatherservicebase.R.id.map_type_trend) {
            l();
            moji.com.mjweatherservicebase.BaseFlowersMainPresenter flowersMainPresenter2 = moji.com.mjweatherservicebase.BaseHomePageActivity.INSTANCE.getFlowersMainPresenter();
            if (flowersMainPresenter2 != null) {
                flowersMainPresenter2.eventMapTypeClick();
            }
        }
        com.sensorsdata.analytics.android.autotrack.aop.SensorsDataAutoTrackHelper.trackRadioGroup(group, checkedId);
    }

    public void onCreatedView(@org.jetbrains.annotations.Nullable android.view.View view) {
        kotlin.jvm.internal.Intrinsics.checkNotNull(view);
        android.view.View findViewById = view.findViewById(moji.com.mjweatherservicebase.R.id.map_radio_group);
        kotlin.jvm.internal.Intrinsics.checkNotNullExpressionValue(findViewById, "view!!.findViewById(R.id.map_radio_group)");
        android.widget.RadioGroup radioGroup = (android.widget.RadioGroup) findViewById;
        this.mRadioGroup = radioGroup;
        if (radioGroup == null) {
            kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mRadioGroup");
            radioGroup = null;
        }
        radioGroup.setOnCheckedChangeListener(this);
        com.moji.dialog.MJDialog<?> build = new com.moji.dialog.control.MJDialogLoadingControl.Builder(this.activity).loadingMsg(moji.com.mjweatherservicebase.R.string.rflowers_map_switching).build();
        kotlin.jvm.internal.Intrinsics.checkNotNullExpressionValue(build, "Builder(activity)\n      …\n                .build()");
        this.mLoadingDialog = build;
        this.mSpotMapFragment = new moji.com.mjweatherservicebase.card.RFlowersMapFragment();
        this.mTrentFragment = new moji.com.mjweatherservicebase.card.RFlowersWNIMapFragment();
    }

    public final void showLoading() {
        android.app.Dialog dialog = this.mLoadingDialog;
        com.moji.dialog.MJDialog<?> mJDialog = null;
        if (dialog == null) {
            kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mLoadingDialog");
            dialog = null;
        }
        if (dialog.isShowing()) {
            return;
        }
        com.moji.dialog.MJDialog<?> mJDialog2 = this.mLoadingDialog;
        if (mJDialog2 == null) {
            kotlin.jvm.internal.Intrinsics.throwUninitializedPropertyAccessException("mLoadingDialog");
        } else {
            mJDialog = mJDialog2;
        }
        mJDialog.show();
    }
}
