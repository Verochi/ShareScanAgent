package moji.com.mjweatherservicebase.view.sliderbanner;

@kotlin.Metadata(d1 = {"\u0000\u0085\u0001\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0002\u0010 \n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0000\n\u0002\u0010\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\u0002\n\u0002\u0018\u0002\n\u0000\n\u0002\u0010\u000b\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0000\n\u0002\u0010\b\n\u0002\b\b\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\b\n\u0002\b\u0004\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0002\b\u0007\n\u0002\u0010\u0007\n\u0002\b\u000b\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0002\b\u0007*\u0001,\u0018\u0000 P2\u00020\u0001:\u0002PQB%\b\u0007\u0012\u0006\u0010J\u001a\u00020I\u0012\b\u0010L\u001a\u0004\u0018\u00010K\u0012\b\b\u0002\u0010M\u001a\u00020\u0016¢\u0006\u0004\bN\u0010OJ \u0010\b\u001a\u00020\u00072\u000e\u0010\u0004\u001a\n\u0012\u0004\u0012\u00020\u0003\u0018\u00010\u00022\b\u0010\u0006\u001a\u0004\u0018\u00010\u0005J\b\u0010\t\u001a\u00020\u0007H\u0014J\b\u0010\n\u001a\u00020\u0007H\u0014J\u0010\u0010\r\u001a\u00020\u00072\b\u0010\f\u001a\u0004\u0018\u00010\u000bJ\u0012\u0010\u0011\u001a\u00020\u00102\b\u0010\u000f\u001a\u0004\u0018\u00010\u000eH\u0016J\u0010\u0010\u0013\u001a\u00020\u00072\u0006\u0010\u0012\u001a\u00020\u0010H\u0016J\u0018\u0010\u0018\u001a\u00020\u00072\u0006\u0010\u0015\u001a\u00020\u00142\u0006\u0010\u0017\u001a\u00020\u0016H\u0014J\u0018\u0010\u001b\u001a\u00020\u00072\u0006\u0010\u0019\u001a\u00020\u00162\u0006\u0010\u001a\u001a\u00020\u0016H\u0002J\u0010\u0010\u001c\u001a\u00020\u00072\u0006\u0010\u001a\u001a\u00020\u0016H\u0002J\b\u0010\u001d\u001a\u00020\u0007H\u0002J\b\u0010\u001e\u001a\u00020\u0007H\u0002R\u0014\u0010\"\u001a\u00020\u001f8\u0002X\u0082\u0004¢\u0006\u0006\n\u0004\b \u0010!R\u001b\u0010(\u001a\u00020#8BX\u0082\u0084\u0002¢\u0006\f\n\u0004\b$\u0010%\u001a\u0004\b&\u0010'R\u0018\u0010+\u001a\u0004\u0018\u00010\u00058\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\b)\u0010*R\u0014\u0010/\u001a\u00020,8\u0002X\u0082\u0004¢\u0006\u0006\n\u0004\b-\u0010.R+\u00105\u001a\u0012\u0012\u0004\u0012\u00020\u001600j\b\u0012\u0004\u0012\u00020\u0016`18BX\u0082\u0084\u0002¢\u0006\f\n\u0004\b2\u0010%\u001a\u0004\b3\u00104R\u0018\u00108\u001a\u0004\u0018\u00010\u000b8\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\b6\u00107R\u0016\u0010<\u001a\u0002098\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\b:\u0010;R\u0016\u0010>\u001a\u0002098\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\b=\u0010;R\u0014\u0010A\u001a\u00020\u00168\u0002X\u0082\u0004¢\u0006\u0006\n\u0004\b?\u0010@R\u0016\u0010D\u001a\u00020\u00108\u0002@\u0002X\u0082\u000e¢\u0006\u0006\n\u0004\bB\u0010CR\u0014\u0010H\u001a\u00020E8\u0002X\u0082\u0004¢\u0006\u0006\n\u0004\bF\u0010G¨\u0006R"}, d2 = {"Lmoji/com/mjweatherservicebase/view/sliderbanner/MJAutoSlideBannerView;", "Landroid/widget/FrameLayout;", "", "Lcom/moji/http/me/MeServiceEntity$EntranceRegionResListBean$EntranceResListBean;", org.apache.tools.ant.taskdefs.optional.j2ee.HotDeploymentTool.ACTION_LIST, "Lcom/moji/opevent/OperationEventPage;", "type", "", "refreshData", "onAttachedToWindow", "onDetachedFromWindow", "Lmoji/com/mjweatherservicebase/view/sliderbanner/MJAutoSlideBannerView$OnBannerSelectedListener;", com.google.android.gms.common.internal.ServiceSpecificExtraArgs.CastExtraArgs.LISTENER, "setOnBannerSelectedListener", "Landroid/view/MotionEvent;", "ev", "", "dispatchTouchEvent", "disallowIntercept", "requestDisallowInterceptTouchEvent", "Landroid/view/View;", "changedView", "", com.huawei.hms.push.constant.RemoteMessageConst.Notification.VISIBILITY, "onVisibilityChanged", com.anythink.core.api.ATAdConst.NETWORK_REQUEST_PARAMS_KEY.BANNER_SIZE, com.alibaba.sdk.android.oss.common.RequestParameters.POSITION, "d", "c", "e", "f", "Lmoji/com/mjweatherservicebase/databinding/ViewAutoSlideBannerBinding;", com.baidu.mobads.sdk.api.IAdInterListener.AdReqParam.AD_COUNT, "Lmoji/com/mjweatherservicebase/databinding/ViewAutoSlideBannerBinding;", "binding", "Lmoji/com/mjweatherservicebase/view/sliderbanner/BannerAdapter;", "t", "Lkotlin/Lazy;", "getMAdapter", "()Lmoji/com/mjweatherservicebase/view/sliderbanner/BannerAdapter;", "mAdapter", com.umeng.analytics.pro.bo.aN, "Lcom/moji/opevent/OperationEventPage;", "mType", "moji/com/mjweatherservicebase/view/sliderbanner/MJAutoSlideBannerView$mOnPageChangeCallback$1", "v", "Lmoji/com/mjweatherservicebase/view/sliderbanner/MJAutoSlideBannerView$mOnPageChangeCallback$1;", "mOnPageChangeCallback", "Ljava/util/ArrayList;", "Lkotlin/collections/ArrayList;", com.baidu.mobads.sdk.api.IAdInterListener.AdReqParam.WIDTH, "getMAlreadyStatistics", "()Ljava/util/ArrayList;", "mAlreadyStatistics", "x", "Lmoji/com/mjweatherservicebase/view/sliderbanner/MJAutoSlideBannerView$OnBannerSelectedListener;", "mOnSelectListener", "", "y", "F", "mLastMotionY", com.umeng.analytics.pro.bo.aJ, "mLastMotionX", androidx.exifinterface.media.ExifInterface.GPS_MEASUREMENT_IN_PROGRESS, "I", "mTouchSlop", "B", "Z", "mIsBeingDragged", "Ljava/lang/Runnable;", "C", "Ljava/lang/Runnable;", "autoScrollRunnable", "Landroid/content/Context;", "context", "Landroid/util/AttributeSet;", "attrs", "defStyleAttr", "<init>", "(Landroid/content/Context;Landroid/util/AttributeSet;I)V", "Companion", "OnBannerSelectedListener", "MJWeatherServiceBase_release"}, k = 1, mv = {1, 6, 0})
/* loaded from: classes20.dex */
public final class MJAutoSlideBannerView extends android.widget.FrameLayout {
    public static final long DELAYED_TIME = 4000;
    public static final int MAX_VALUE = 10000;

    /* renamed from: A, reason: from kotlin metadata */
    public final int mTouchSlop;

    /* renamed from: B, reason: from kotlin metadata */
    public boolean mIsBeingDragged;

    /* renamed from: C, reason: from kotlin metadata */
    @org.jetbrains.annotations.NotNull
    public final java.lang.Runnable autoScrollRunnable;

    /* renamed from: n, reason: from kotlin metadata */
    @org.jetbrains.annotations.NotNull
    public final moji.com.mjweatherservicebase.databinding.ViewAutoSlideBannerBinding binding;

    /* renamed from: t, reason: from kotlin metadata */
    @org.jetbrains.annotations.NotNull
    public final kotlin.Lazy mAdapter;

    /* renamed from: u, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public com.moji.opevent.OperationEventPage mType;

    /* renamed from: v, reason: from kotlin metadata */
    @org.jetbrains.annotations.NotNull
    public final moji.com.mjweatherservicebase.view.sliderbanner.MJAutoSlideBannerView$mOnPageChangeCallback$1 mOnPageChangeCallback;

    /* renamed from: w, reason: from kotlin metadata */
    @org.jetbrains.annotations.NotNull
    public final kotlin.Lazy mAlreadyStatistics;

    /* renamed from: x, reason: from kotlin metadata */
    @org.jetbrains.annotations.Nullable
    public moji.com.mjweatherservicebase.view.sliderbanner.MJAutoSlideBannerView.OnBannerSelectedListener mOnSelectListener;

    /* renamed from: y, reason: from kotlin metadata */
    public float mLastMotionY;

    /* renamed from: z, reason: from kotlin metadata */
    public float mLastMotionX;

    @kotlin.Metadata(d1 = {"\u0000\u001c\n\u0002\u0018\u0002\n\u0002\u0010\u0000\n\u0000\n\u0002\u0010\u0002\n\u0000\n\u0002\u0010\b\n\u0000\n\u0002\u0018\u0002\n\u0000\bf\u0018\u00002\u00020\u0001J\u001a\u0010\u0002\u001a\u00020\u00032\u0006\u0010\u0004\u001a\u00020\u00052\b\u0010\u0006\u001a\u0004\u0018\u00010\u0007H&¨\u0006\b"}, d2 = {"Lmoji/com/mjweatherservicebase/view/sliderbanner/MJAutoSlideBannerView$OnBannerSelectedListener;", "", "onBannerSelected", "", com.alibaba.sdk.android.oss.common.RequestParameters.POSITION, "", "data", "Lcom/moji/http/me/MeServiceEntity$EntranceRegionResListBean$EntranceResListBean;", "MJWeatherServiceBase_release"}, k = 1, mv = {1, 6, 0}, xi = 48)
    public interface OnBannerSelectedListener {
        void onBannerSelected(int position, @org.jetbrains.annotations.Nullable com.moji.http.me.MeServiceEntity.EntranceRegionResListBean.EntranceResListBean data);
    }

    /* JADX WARN: 'this' call moved to the top of the method (can break code semantics) */
    @kotlin.jvm.JvmOverloads
    public MJAutoSlideBannerView(@org.jetbrains.annotations.NotNull android.content.Context context, @org.jetbrains.annotations.Nullable android.util.AttributeSet attributeSet) {
        this(context, attributeSet, 0, 4, null);
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(context, "context");
    }

    /* JADX WARN: 'super' call moved to the top of the method (can break code semantics) */
    @kotlin.jvm.JvmOverloads
    public MJAutoSlideBannerView(@org.jetbrains.annotations.NotNull android.content.Context context, @org.jetbrains.annotations.Nullable android.util.AttributeSet attributeSet, int i) {
        super(context, attributeSet, i);
        kotlin.Lazy lazy;
        kotlin.Lazy lazy2;
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(context, "context");
        moji.com.mjweatherservicebase.databinding.ViewAutoSlideBannerBinding inflate = moji.com.mjweatherservicebase.databinding.ViewAutoSlideBannerBinding.inflate(android.view.LayoutInflater.from(context), this, true);
        kotlin.jvm.internal.Intrinsics.checkNotNullExpressionValue(inflate, "inflate(LayoutInflater.from(context), this, true)");
        this.binding = inflate;
        lazy = kotlin.LazyKt__LazyJVMKt.lazy(new moji.com.mjweatherservicebase.view.sliderbanner.MJAutoSlideBannerView$mAdapter$2(context));
        this.mAdapter = lazy;
        inflate.viewIndex.setIndicatorDrawable(moji.com.mjweatherservicebase.R.drawable.feed_banner_indicator_normal, moji.com.mjweatherservicebase.R.drawable.feed_banner_indicator_selected);
        inflate.viewIndex.setInterval((int) com.moji.tool.DeviceTool.getDeminVal(moji.com.mjweatherservicebase.R.dimen.x4));
        inflate.pager.setAdapter(getMAdapter());
        this.mOnPageChangeCallback = new moji.com.mjweatherservicebase.view.sliderbanner.MJAutoSlideBannerView$mOnPageChangeCallback$1(this);
        lazy2 = kotlin.LazyKt__LazyJVMKt.lazy(moji.com.mjweatherservicebase.view.sliderbanner.MJAutoSlideBannerView$mAlreadyStatistics$2.INSTANCE);
        this.mAlreadyStatistics = lazy2;
        this.mTouchSlop = android.view.ViewConfiguration.get(context).getScaledTouchSlop();
        this.autoScrollRunnable = new defpackage.y11(this);
    }

    public /* synthetic */ MJAutoSlideBannerView(android.content.Context context, android.util.AttributeSet attributeSet, int i, int i2, kotlin.jvm.internal.DefaultConstructorMarker defaultConstructorMarker) {
        this(context, attributeSet, (i2 & 4) != 0 ? 0 : i);
    }

    public static final void b(moji.com.mjweatherservicebase.view.sliderbanner.MJAutoSlideBannerView this$0) {
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(this$0, "this$0");
        androidx.viewpager2.widget.ViewPager2 viewPager2 = this$0.binding.pager;
        viewPager2.setCurrentItem(viewPager2.getCurrentItem() + 1);
        this$0.e();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public final moji.com.mjweatherservicebase.view.sliderbanner.BannerAdapter getMAdapter() {
        return (moji.com.mjweatherservicebase.view.sliderbanner.BannerAdapter) this.mAdapter.getValue();
    }

    private final java.util.ArrayList<java.lang.Integer> getMAlreadyStatistics() {
        return (java.util.ArrayList) this.mAlreadyStatistics.getValue();
    }

    public final void c(int position) {
        moji.com.mjweatherservicebase.view.sliderbanner.MJAutoSlideBannerView.OnBannerSelectedListener onBannerSelectedListener;
        if (getMAdapter().getData(position) == null || (onBannerSelectedListener = this.mOnSelectListener) == null) {
            return;
        }
        onBannerSelectedListener.onBannerSelected(position, getMAdapter().getData(position));
    }

    public final void d(int size, int position) {
        this.binding.viewIndex.bindScrollIndexView(size, position);
        c(position);
    }

    @Override // android.view.ViewGroup, android.view.View
    public boolean dispatchTouchEvent(@org.jetbrains.annotations.Nullable android.view.MotionEvent ev) {
        boolean dispatchTouchEvent = super.dispatchTouchEvent(ev);
        boolean z = true;
        if ((ev != null && ev.getAction() == 2) && this.mIsBeingDragged) {
            return dispatchTouchEvent;
        }
        java.lang.Integer valueOf = ev != null ? java.lang.Integer.valueOf(ev.getAction()) : null;
        if (valueOf != null && valueOf.intValue() == 0) {
            this.mLastMotionY = ev.getY();
            this.mLastMotionX = ev.getX();
            this.mIsBeingDragged = false;
            f();
        } else if (valueOf != null && valueOf.intValue() == 2) {
            float y = ev.getY();
            float x = ev.getX();
            float abs = java.lang.Math.abs(y - this.mLastMotionY);
            float abs2 = java.lang.Math.abs(x - this.mLastMotionX);
            int i = this.mTouchSlop;
            if (abs2 > i && 5 * abs2 > abs) {
                this.mIsBeingDragged = true;
                requestDisallowInterceptTouchEvent(true);
            } else if (abs > i && abs > abs2 * 5) {
                requestDisallowInterceptTouchEvent(false);
            }
        } else {
            if ((valueOf == null || valueOf.intValue() != 3) && (valueOf == null || valueOf.intValue() != 1)) {
                z = false;
            }
            if (z) {
                this.mIsBeingDragged = false;
                requestDisallowInterceptTouchEvent(false);
                e();
            }
        }
        return dispatchTouchEvent;
    }

    public final void e() {
        removeCallbacks(this.autoScrollRunnable);
        postDelayed(this.autoScrollRunnable, DELAYED_TIME);
    }

    public final void f() {
        removeCallbacks(this.autoScrollRunnable);
    }

    @Override // android.view.ViewGroup, android.view.View
    public void onAttachedToWindow() {
        super.onAttachedToWindow();
        this.binding.pager.registerOnPageChangeCallback(this.mOnPageChangeCallback);
    }

    @Override // android.view.ViewGroup, android.view.View
    public void onDetachedFromWindow() {
        super.onDetachedFromWindow();
        this.binding.pager.unregisterOnPageChangeCallback(this.mOnPageChangeCallback);
    }

    @Override // android.view.View
    public void onVisibilityChanged(@org.jetbrains.annotations.NotNull android.view.View changedView, int visibility) {
        kotlin.jvm.internal.Intrinsics.checkNotNullParameter(changedView, "changedView");
        super.onVisibilityChanged(changedView, visibility);
        if (visibility == 0) {
            e();
        } else {
            f();
        }
    }

    public final void refreshData(@org.jetbrains.annotations.Nullable java.util.List<? extends com.moji.http.me.MeServiceEntity.EntranceRegionResListBean.EntranceResListBean> list, @org.jetbrains.annotations.Nullable com.moji.opevent.OperationEventPage type) {
        this.mType = type;
        if (list != null) {
            getMAlreadyStatistics().clear();
            getMAdapter().replaceData(list, type);
            getMAdapter().notifyDataSetChanged();
            int size = list.size();
            this.binding.pager.setCurrentItem(5000 - (5000 % size), false);
            if (size > 1) {
                this.binding.viewIndex.setVisibility(0);
                d(size, 0);
            } else {
                this.binding.viewIndex.setVisibility(8);
                c(0);
            }
            e();
        }
    }

    @Override // android.view.ViewGroup, android.view.ViewParent
    public void requestDisallowInterceptTouchEvent(boolean disallowIntercept) {
        android.view.ViewParent parent = getParent();
        if (parent != null) {
            parent.requestDisallowInterceptTouchEvent(disallowIntercept);
        }
    }

    public final void setOnBannerSelectedListener(@org.jetbrains.annotations.Nullable moji.com.mjweatherservicebase.view.sliderbanner.MJAutoSlideBannerView.OnBannerSelectedListener listener) {
        this.mOnSelectListener = listener;
    }
}
